(this["webpackJsonpprojeto-es"]=this["webpackJsonpprojeto-es"]||[]).push([[0],{44:function(t,a,e){},49:function(t,a,e){},54:function(t,a,e){},55:function(t,a,e){},56:function(t,a,e){},57:function(t,a,e){},60:function(t,a,e){},61:function(t,a,e){},62:function(t,a,e){"use strict";e.r(a);e(44);var o=e(1),i=e(21),r=e.n(i),c=e(24),s=e(13),n=e(14),d=e(17),l=(e(49),e(6)),p=function(t){var a=Object(o.useState)("2021-01-01"),e=Object(n.a)(a,2),i=e[0],r=e[1],s=Object(o.useState)("2021-12-01"),p=Object(n.a)(s,2),b=p[0],_=p[1],u={pathname:"/bairros/".concat(i,"&").concat(b)};return Object(l.jsxs)("section",{className:"container-fluid mainNav",children:[Object(l.jsx)("img",{className:"logo_home",src:"./img/Logo_blue.png",alt:"logo"}),Object(l.jsxs)("div",{className:"inputs",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"de",children:Object(l.jsx)("strong",{children:"De"})}),Object(l.jsx)("input",{className:"date",type:"date",id:"de",name:"de",value:i,onChange:function(t){return r(t.target.value)},required:!0})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:"ate",children:Object(l.jsx)("strong",{children:"At\xe9"})}),Object(l.jsx)("input",{className:"date",type:"date",id:"ate",name:"ate",value:b,onChange:function(t){return _(t.target.value)},required:!0})]}),Object(l.jsx)("div",{children:Object(l.jsx)(d.a,{className:"button",type:"submit",children:function(){var t=Date.parse("2019-01-01"),a=Date.parse("2021-12-31"),e=Date.parse(i),o=Date.parse(b),r=[Date.parse("2019-02-30"),Date.parse("2019-02-31"),Date.parse("2020-02-30"),Date.parse("2020-02-31"),Date.parse("2021-02-30"),Date.parse("2021-02-31")];return!(o<e)&&(e>=t&&e<=a&&(o>=t&&o<=a&&(!r.includes(e)&&!r.includes(o))))}()?Object(l.jsx)(c.b,{to:u,children:Object(l.jsx)("strong",{children:"Buscar"})}):Object(l.jsx)("strong",{children:"Data inv\xe1lida"})})})]})]})},b=e(2),_=e.n(b),u=e(5);e(54);var m=function(t){var a=Object(o.useState)([]),e=Object(n.a)(a,2),i=e[0],r=e[1],c=t.selectedData;function s(){return(s=Object(u.a)(_.a.mark((function a(){var e,o;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e=[{bairro:"TODOS OS BAIRROS",qtd:0,periodo_manha:0,periodo_tarde:0,periodo_noite:0,periodo_madrugada:0,c_vitima:0,c_vitima_fatal:0,tipo_alagamento:0,tipo_atropelamento:0,tipo_capotamento:0,tipo_choque:0,tipo_colisao:0,tipo_queda:0,tipo_tombamento:0,tipo_outros:0,qtd_auto:0,qtd_moto:0,qtd_ciclom:0,qtd_ciclista:0,qtd_pedestre:0,qtd_onibus:0,qtd_caminhao:0,qtd_viatura:0,qtd_outros:0,qtd_vitimas:0,qtd_vitimasfatais:0,local_longo_via:0,local_cruzamento:0,local_outros:0,tempo_bom:0,tempo_chuvoso:0,tempo_outros:0,pista_seca:0,pista_molhada:0,pista_conservacao_perfeita:0,pista_conservacao_mal_cons:0,pista_conservacao_mal_ilum:0}],(o=t.data)&&(o.reduce((function(t,a){t[a.bairro]||(t[a.bairro]={bairro:a.bairro,qtd:0,periodo_manha:0,periodo_tarde:0,periodo_noite:0,periodo_madrugada:0,c_vitima:0,c_vitima_fatal:0,tipo_alagamento:0,tipo_atropelamento:0,tipo_capotamento:0,tipo_choque:0,tipo_colisao:0,tipo_queda:0,tipo_tombamento:0,tipo_outros:0,qtd_auto:0,qtd_moto:0,qtd_ciclom:0,qtd_ciclista:0,qtd_pedestre:0,qtd_onibus:0,qtd_caminhao:0,qtd_viatura:0,qtd_outros:0,qtd_vitimas:0,qtd_vitimasfatais:0,local_longo_via:0,local_cruzamento:0,local_outros:0,tempo_bom:0,tempo_chuvoso:0,tempo_outros:0,pista_seca:0,pista_molhada:0,pista_conservacao_perfeita:0,pista_conservacao_mal_cons:0,pista_conservacao_mal_ilum:0},e.push(t[a.bairro])),t[a.bairro].qtd+=1,e[0].qtd+=1,t[a.bairro].qtd_auto+=parseInt(a.auto),e[0].qtd_auto+=parseInt(a.auto)||0,t[a.bairro].qtd_moto+=parseInt(a.moto),e[0].qtd_moto+=parseInt(a.moto)||0,t[a.bairro].qtd_ciclom+=parseInt(a.ciclom),e[0].qtd_ciclom+=parseInt(a.ciclom)||0,t[a.bairro].qtd_ciclista+=parseInt(a.ciclista),e[0].qtd_ciclista+=parseInt(a.ciclista)||0,t[a.bairro].qtd_pedestre+=parseInt(a.pedestre),e[0].qtd_pedestre+=parseInt(a.pedestre)||0,t[a.bairro].qtd_onibus+=parseInt(a.onibus),e[0].qtd_onibus+=parseInt(a.onibus)||0,t[a.bairro].qtd_caminhao+=parseInt(a.caminhao),e[0].qtd_caminhao+=parseInt(a.caminhao)||0,t[a.bairro].qtd_viatura+=parseInt(a.viatura),e[0].qtd_viatura+=parseInt(a.viatura)||0,t[a.bairro].qtd_outros+=parseInt(a.outros),e[0].qtd_outros+=parseInt(a.outros)||0,t[a.bairro].qtd_vitimas+=parseInt(a.vitimas),e[0].qtd_vitimas+=parseInt(a.vitimas)||0,t[a.bairro].qtd_vitimasfatais+=parseInt(a.vitimasfatais),e[0].qtd_vitimasfatais+=parseInt(a.vitimasfatais)||0;try{parseInt(a.hora.substring(0,2))<=4?(t[a.bairro].periodo_madrugada+=1,e[0].periodo_madrugada+=1):parseInt(a.hora.substring(0,2))<=11?(t[a.bairro].periodo_manha+=1,e[0].periodo_manha+=1):parseInt(a.hora.substring(0,2))<=17?(t[a.bairro].periodo_tarde+=1,e[0].periodo_tarde+=1):parseInt(a.hora.substring(0,2))<=23&&(t[a.bairro].periodo_noite+=1,e[0].periodo_noite+=1)}catch(o){console.warn(o)}try{"COM V\xcdTIMA"===a.natureza_acidente?(t[a.bairro].c_vitima+=1,e[0].c_vitima+=1):"V\xcdTIMA FATAL"===a.natureza_acidente&&(t[a.bairro].c_vitima_fatal+=1,e[0].c_vitima_fatal+=1)}catch(o){console.warn(o)}try{"ALAGAMENTO"===a.tipo?(t[a.bairro].tipo_alagamento+=1,e[0].tipo_alagamento+=1):["ATROPELAMENTO","ATROPELAMENTO DE ANIMAL","ATROPELAMENTO DE PESSOA"].includes(a.tipo)?(t[a.bairro].tipo_atropelamento+=1,e[0].tipo_atropelamento+=1):"CAPOTAMENTO"===a.tipo?(t[a.bairro].tipo_capotamento+=1,e[0].tipo_capotamento+=1):"CHOQUE"===a.tipo?(t[a.bairro].tipo_choque+=1,e[0].tipo_choque+=1):["COLIS\xc3O","COLIS\xc3O COM CICLISTA","COLIS\xc3O FRONTAL","COLIS\xc3O LATERAL","COLIS\xc3O TRANSVERSAL","COLIS\xc3O TRASEIRA"].includes(a.tipo)?(t[a.bairro].tipo_colisao+=1,e[0].tipo_colisao+=1):"QUEDA"===a.tipo?(t[a.bairro].tipo_queda+=1,e[0].tipo_queda+=1):"TOMBAMENTO"===a.tipo?(t[a.bairro].tipo_tombamento+=1,e[0].tipo_tombamento+=1):(t[a.bairro].tipo_outros+=1,e[0].tipo_outros+=1)}catch(o){console.warn(o)}try{"Longo da via"===a.acidente_verificado?(t[a.bairro].local_longo_via+=1,e[0].local_longo_via+=1):"Cruzamento"===a.acidente_verificado?(t[a.bairro].local_cruzamento+=1,e[0].local_cruzamento+=1):(t[a.bairro].local_outros+=1,e[0].local_outros=1)}catch(o){console.warn(o)}try{"Bom"===a.tempo_clima?(t[a.bairro].tempo_bom+=1,e[0].tempo_bom+=1):"Chuvoso"===a.tempo_clima?(t[a.bairro].tempo_chuvoso+=1,e[0].tempo_chuvoso+=1):(t[a.bairro].tempo_outros+=1,e[0].tempo_outros+=1)}catch(o){console.warn(o)}try{"Seca"===a.condicao_via?(t[a.bairro].pista_seca+=1,e[0].pista_seca+=1):"Molhada"===a.condicao_via&&(t[a.bairro].pista_molhada+=1,e[0].pista_molhada+=1)}catch(o){console.warn(o)}try{"Perfeito estado"===a.conservacao_via?(t[a.bairro].pista_conservacao_perfeita+=1,e[0].pista_conservacao_perfeita+=1):"Mal conservada"===a.conservacao_via?(t[a.bairro].pista_conservacao_mal_cons+=1,e[0].pista_conservacao_mal_cons+=1):"Mal iluminada"===a.conservacao_via&&(t[a.bairro].pista_conservacao_mal_ilum+=1,e[0].pista_conservacao_mal_ilum+=1)}catch(o){console.warn(o)}return t}),{}),e.sort((function(t,a){return t.qtd>a.qtd?-1:t.qtd>a.qtd?1:0})),r(e));case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(o.useEffect)((function(){return function(){s.apply(this,arguments)}(),function(){r([])}}),[t]),Object(l.jsxs)(d.b,{className:"listgroup container-fluid",children:[i.length>0?Object(l.jsxs)(d.c,{action:!0,id:"bairro-total",className:"text-center",tag:"button",onClick:function(){return c(i[0])},children:[i[0].bairro," - ",i[0].qtd," ACIDENTES"]},0):Object(l.jsx)(d.c,{action:!0,id:"bairro-total",tag:"button"}),i.length>0?i.slice(1).map((function(t,a){return Object(l.jsx)(d.c,{action:!0,id:"bairro",tag:"button",onClick:function(){return c(t)},children:t.qtd>1?Object(l.jsxs)(l.Fragment,{children:[a+1,"\xba ",t.bairro," - ",t.qtd," ACIDENTES"]}):Object(l.jsxs)(l.Fragment,{children:[a+1,"\xba ",t.bairro," - ",t.qtd," ACIDENTE"]})},a+1)})):Object(l.jsx)(d.c,{action:!0,id:"bairro",tag:"button",children:"Carregando..."})]})};e(55);var j=function(t){var a=t.bairroAtual,e=a&&a.local_cruzamento/(a.local_cruzamento+a.local_longo_via+a.local_outros)*100,o=a&&a.pista_seca/(a.pista_seca+a.pista_molhada)*100,i=a&&a.tempo_bom/(a.tempo_bom+a.tempo_chuvoso+a.tempo_outros)*100;return"/ruas/".concat(a&&a.bairro),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"bairroDetail",children:[Object(l.jsx)("h5",{className:"text-center",children:a&&a.bairro}),Object(l.jsx)(d.e,{className:"table-sm",borderless:!0,hover:!0,responsive:!0,children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"V\xedtimas"}),Object(l.jsx)("td",{children:a&&a.c_vitima+a.c_vitima_fatal})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Acidentes em cruzamento"}),Object(l.jsxs)("td",{children:[a&&e.toFixed(1),"%"]})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Acidentes em pista seca"}),Object(l.jsxs)("td",{children:[a&&o.toFixed(1),"%"]})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Acidentes em clima bom"}),Object(l.jsxs)("td",{children:[a&&i.toFixed(1),"%"]})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Motos envolvidas"}),Object(l.jsx)("td",{children:a&&a.qtd_moto})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Carros envolvidos"}),Object(l.jsx)("td",{children:a&&a.qtd_auto})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"\xd4nibus envolvidos"}),Object(l.jsx)("td",{children:a&&a.qtd_onibus})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Pedestres envolvidos"}),Object(l.jsx)("td",{children:a&&a.qtd_pedestre})]})]})})]})})},h=e(34);e(56);var O=function(t){var a=t.bairroAtual;return console.log(a||!1),Object(l.jsxs)("div",{className:"charts",children:[Object(l.jsx)(h.a,{chartType:"PieChart",loader:Object(l.jsx)(d.d,{children:"Aguarde..."}),data:function(){var t=a&&a.c_vitima,e=a&&a.c_vitima_fatal,o=a&&a.qtd-t;return[["V\xedtimas","%"],["Sem v\xedtimas",a&&o],["V\xedtimas fatais",a&&e],["V\xedtimas",a&&t]]}(),options:{title:a&&"V\xedtimas",width:400,height:225},rootProps:{"data-testid":"1"}}),a?Object(l.jsx)(h.a,{chartType:"BarChart",loader:Object(l.jsx)(d.d,{children:"Aguarde..."}),data:[["Element","Acidentes",{role:"style"},{sourceColumn:0,role:"annotation",type:"string",calc:"stringify"}],["Manh\xe3",a&&a.periodo_manha,"#7FB3D5",a&&a.periodo_manha],["Tarde",a&&a.periodo_tarde,"#2980B9",a&&a.periodo_tarde],["Noite",a&&a.periodo_noite,"#154360",a&&a.periodo_noite],["Madrugada",a&&a.periodo_madrugada,"#17202A",a&&a.periodo_madrugada]],options:{title:a&&"Acidentes por per\xedodo do dia",width:450,height:200,bar:{groupWidth:"95%"},legend:{position:"none"}}}):Object(l.jsx)(l.Fragment,{}),Object(l.jsx)(h.a,{chartType:"PieChart",loader:Object(l.jsx)(d.d,{children:"Aguarde..."}),data:[["Ve\xedculos envolvidos","Quantidade"],["Autom\xf3vel",a&&a.qtd_auto],["Moto",a&&a.qtd_moto],["Caminh\xe3o",a&&a.qtd_caminhao],["Ciclista",a&&a.qtd_ciclista],["\xd4nibus",a&&a.qtd_onibus],["Ciclomotor",a&&a.qtd_ciclom]],options:{title:a&&"Ve\xedculos",width:400,height:225},rootProps:{"data-testid":"1"}})]})},v=(e(57),e(58),e(41)),x=e(30),g=v.a({apiKey:"AIzaSyBW9UM4ZmIOw65RNHCTytqFTvQmO5mMfn0",authDomain:"dados-de-transito---recife-pe.firebaseapp.com",databaseURL:"https://dados-de-transito---recife-pe-default-rtdb.firebaseio.com/",projectId:"dados-de-transito---recife-pe",storageBucket:"dados-de-transito---recife-pe.appspot.com",messagingSenderId:"596879868000",appId:"1:596879868000:web:21e7ad5164773fb0d20305",measurementId:"G-R81VKS0FK8"}),f=Object(x.c)(g),q=function(){var t=Object(s.g)().de,a=Object(s.g)().ate,e=Object(o.useState)(),i=Object(n.a)(e,2),r=i[0],c=i[1],d=Object(o.useState)(null),p=Object(n.a)(d,2),b=p[0],h=p[1],v=Object(x.a)(f,"acidentes_teste");function g(){return(g=Object(u.a)(_.a.mark((function e(){var o,i,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fazendo requisi\xe7\xe3o"),e.next=3,Object(x.b)(v);case 3:o=e.sent,i=[],r=new Date(t),s=new Date(a),o.forEach((function(t){try{(r<=new Date(t.data().data)&&s>=new Date(t.data().data)||[""," "].includes(t.data().data))&&i.push(t.data())}catch(a){console.warn(a)}})),c(i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(o.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[]);return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h2",{className:"titulo text-center",children:Object(l.jsx)("strong",{children:"RANKING DE ACIDENTES POR BAIRROS"})}),Object(l.jsxs)("p",{className:"subtitulo text-center",children:["Dados referentes ao per\xedodo entre ",t," e ",a]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"listbairrosmain col-lg-6",children:Object(l.jsx)(m,{de:t,ate:a,data:r,selectedData:function(t){h(t)}})}),Object(l.jsx)("div",{className:"bairrodetailmain col-lg-6",children:Object(l.jsx)(j,{bairroAtual:b})})]}),Object(l.jsx)(O,{bairroAtual:b})]})},A=function(){return Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{path:"/",element:Object(l.jsx)(p,{})}),Object(l.jsx)(s.a,{path:"/bairros/:de&:ate",element:Object(l.jsx)(q,{})})]})},I=(e(60),function(t){var a=t.titulo;return Object(l.jsxs)("header",{className:"Header",children:[Object(l.jsxs)("div",{className:"imagotipo",children:[Object(l.jsx)("img",{className:"logo",src:"./img/logo.png",alt:"logo"}),Object(l.jsx)("h3",{children:a})]}),Object(l.jsxs)("nav",{className:"navUrl",children:[Object(l.jsx)(c.b,{to:"/",className:"urls",children:Object(l.jsx)("img",{src:"./img/home.png",alt:"GitHub",width:"23",height:"23"})}),Object(l.jsx)("a",{href:"https://github.com/jpveloso0/Projeto-ES",target:"_blank",rel:"noopener noreferrer",className:"urls",children:Object(l.jsx)("img",{src:"./img/github-logo.png",alt:"GitHub",width:"25",height:"25"})})]})]})}),N=(e(61),function(t){var a=t.desc;return Object(l.jsx)("footer",{children:Object(l.jsx)("p",{children:Object(l.jsx)("strong",{children:a})})})}),S=function(){return Object(l.jsxs)(c.a,{className:"App",children:[Object(l.jsx)(I,{titulo:"Recife STATS"}),Object(l.jsx)(A,{}),Object(l.jsx)(N,{desc:"P\xe1gina desenvolvida utilizando ReactJs & NodeJS"})]})},C=document.getElementById("root");r.a.render(Object(l.jsx)(S,{}),C)}},[[62,1,2]]]);
//# sourceMappingURL=main.bfdcbb5c.chunk.js.map